(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{115:function(t,e,r){"use strict";r.r(e),r.d(e,"boot",(function(){return j}));var s=r(128),o={start(){document.querySelectorAll(".js-button-loading")&&Object(s.c)({downloadButtonsSelector:".js-button-loading",slotId:"top-leaderboard-app-page-desktop"}).start()}},a=r(138),i={start(){var t=document.querySelector(".js-modal-di")&&document.querySelector(".js-trigger-modal-di"),e=document.querySelector(".js-modal-di-external")&&document.querySelector(".js-trigger-modal-di-external");document.querySelector(".js-header-bar")&&document.querySelector(".js-header-bar__cta")&&Object(a.a)().start(),t&&Object(a.c)().start(),e&&Object(a.b)().start()}},n={start(){document.querySelector(".js-mobile-modal-di")&&document.querySelector(".js-trigger-mobile-modal-di")&&Object(a.d)().start()}},u=r(129),c=r(1),l={start(){var{hasDirectOrExternalDownload:t}=c.b;t&&Object(u.a)().start()}},d={start(){Object(s.f)().start()}},h={start(){Boolean(document.querySelector(".js-modal-security-status"))&&Object(s.k)(".js-modal-security-status").start()}},m=r(15),g=r.n(m),{displayType:S}=c.b,_={start(){Boolean(document.querySelector(".js-button-social"))&&"desktop"===S&&new g.a(document).on("click",".js-button-social",(t,e)=>{t.preventDefault(),window.open(e.href,e.title,"height=500,width=600")})}},p=r(132),f=r(16),b=r(134),R=r(130),y={start(){Boolean(document.querySelector(".js-modal-user-rating"))&&new b.a({modal:new R.a({modalSelector:".js-modal-user-rating"}),domDelegateScope:new g.a(document),postRequest:p.a,sessionStorage:Object(f.b)()}).start()}};function j(){o.start(),i.start(),n.start(),l.start(),d.start(),h.start(),_.start(),y.start()}},132:function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var s=r(66),o=r.n(s),a=r(133),i=r.n(a);function n(t,e){var r={method:"post",credentials:"include",mode:"no-cors",headers:{Accept:"application/json","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},body:o.a.stringify(e)};return fetch(t,r).then(i.a).then(t=>t.json())}},133:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.status,r=t.statusText;if(e>=200&&e<300)return t;var s=new Error(r);throw s.response=t,s}},134:function(t,e,r){"use strict";function s(t,e,r,s,o,a,i){try{var n=t[a](i),u=n.value}catch(t){return void r(t)}n.done?e(u):Promise.resolve(u).then(s,o)}r.d(e,"a",(function(){return o}));class o{constructor(t){var{modal:e,postRequest:r,domDelegateScope:s,sessionStorage:o,triggerSelector:a=".js-modal-user-rating-trigger",formSelector:i=".js-modal-user-rating-form",userRatingOkSelector:n=".js-modal-user-rating-ok",userRatingKoSelector:u=".js-modal-user-rating-ko",userRatingFirstStepSelector:c=".js-modal-user-rating-first-step",radioSelector:l=".js-selector-rating-value",userRatingFormButtonSelector:d=".js-modal-user-rating-button",userRatingStarsSelector:h=".js-modal-user-rating-stars .js-rating-stars-use",modalSelector:m=".js-modal-user-rating"}=t;this._modal=e,this._postRequest=r,this._domDelegateScope=s,this._sessionStorage=o,this._triggerSelector=a,this._formSelector=i,this._radioSelector=l,this._userRatingOkSelector=n,this._userRatingKoSelector=u,this._userRatingFormButtonSelector=d,this._userRatingFirstStepSelector=c,this._userRatingStarsSelector=h,this._modalSelector=m}start(){this._buttonsRateIt=Array.from(document.querySelectorAll(this._triggerSelector)),this._form=document.querySelector(this._formSelector),this._userRatingOk=document.querySelector(this._userRatingOkSelector),this._userRatingKo=document.querySelector(this._userRatingKoSelector),this._userRatingValues=Array.from(document.querySelectorAll(this._radioSelector)),this._userRatingFormButton=document.querySelector(this._userRatingFormButtonSelector),this._userRatingFirstStep=document.querySelector(this._userRatingFirstStepSelector),this._userRatingStars=Array.from(document.querySelectorAll(this._userRatingStarsSelector)),this._popup=document.querySelector(this._modalSelector),this._appRatedKey="APP_"+this._form.dataset.appId+"_RATED",this._domDelegateScope.on("click",this._triggerSelector,this._showModal.bind(this))}_showModal(t){t.preventDefault(),this._domDelegateScope.on("change",this._radioSelector,this._handleRadioChange.bind(this)),this._form.addEventListener("submit",this._handleSubmit.bind(this)),this._modal.show()}_handleRadioChange(){this._userRatingFormButton.removeAttribute("disabled"),this._domDelegateScope.off("change",this._radioSelector)}_handleSubmit(t){var e,r=this;return(e=function*(){t.preventDefault(),r._popup.setAttribute("data-meta","user-rating-modal-review"),r._userRatingFormButton.setAttribute("disabled",!0);var e=r._form.getAttribute("data-app-id"),s=2*r._userRatingValues.find(t=>t.checked).value;try{var o=r._sessionStorage.hasItem(r._appRatedKey)?{value:s}:yield r._postRequest("/rate-app",{value:s,appId:e});r._userRatingSuccess(o)}catch(t){r._userRatingError()}},function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function n(t){s(i,o,a,n,u,"next",t)}function u(t){s(i,o,a,n,u,"throw",t)}n(void 0)}))})()}_userRatingSuccess(t){var{value:e}=t;this._userRatingFirstStep.classList.add("is-hidden");var r=e/2;this._userRatingStars.forEach((t,e)=>{var s=r>=e+1?"#star-full":"#star-empty";t.setAttribute("xlink:href",s)}),this._userRatingOk.classList.remove("is-hidden"),this._buttonsRateIt.forEach(t=>{t.setAttribute("disabled",!0)}),this._sessionStorage.setItem(this._appRatedKey,"1")}_userRatingError(){this._userRatingFirstStep.classList.add("is-hidden"),this._userRatingKo.classList.remove("is-hidden")}}}}]);