(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{129:function(e,t,o){"use strict";o.d(t,"a",(function(){return d}));var a=o(15),s=o.n(a);class n{constructor(e){var{downloadDataAttribute:t="data-download",buttonSelector:o=".js-launch-download",iframeSelector:a="#iframe-download-launcher",downloadTracker:s,storage:n,DomDelegate:i,delayLaunchDownload:l=3e3,allowedReferralPageId:r=["app-download"],appSupportMessageSelector:d,loadingBarSelector:c,appIdReferrerSelector:h,eventTracker:_,canLaunchDownloadOnClick:m=!0}=e;this._downloadDataAttribute=t,this._buttonSelector=o,this._downloadTracker=s,this._downloadIframe=document.querySelector(a),this._storage=n,this._DomDelegate=i,this._domDelegateScope=null,this._delayLaunchDownload=l,this._allowedReferralPageId=r,this._appSupportMessageSelector=d,this._appIdReferrerSelector=h,this._loadingBarSelector=c,this._onClickButton=this._onClickButton.bind(this),this._eventTracker=_,this._canLaunchDownloadOnClick=m}start(){var e=Array.from(document.querySelectorAll(this._buttonSelector)),t=this._getMainDownloadData(e);this._appSupportMessageElement=document.querySelector(this._appSupportMessageSelector),this._appIdReferrerElement=document.querySelector(this._appIdReferrerSelector),this._loadingBarElement=document.querySelector(this._loadingBarSelector),this._domDelegateScope=new this._DomDelegate(document),this._domDelegateScope.on("click",this._buttonSelector,this._onClickButton),t&&t.downloadUrl&&(this._canLaunchDownloadOnStart(t)&&window.setTimeout(()=>{this._launchDownload(t)},this._delayLaunchDownload),this._canTrackOnStart()&&this._track(),setTimeout(()=>{this._showAppSupportMessage(),this._showAppReferrerPopUp()},this._delayLaunchDownload))}_getMainDownloadData(e){return e.map(e=>this._extractDownloadData(e)).filter(this._hasLaunchDownloadOnStart)[0]}_extractDownloadData(e){return JSON.parse(e.getAttribute(this._downloadDataAttribute))}_hasLaunchDownloadOnStart(e){return e.launchDownloadOnStart}_canLaunchDownloadOnStart(e){return!e.isExternalDownload&&this._isReferrerAllowed()}_canTrackOnStart(){return this._isReferrerAllowed()}_isReferrerAllowed(){var e=this._storage.getItem(n.STORAGE_REFERRER_PAGE_ID);return this._allowedReferralPageId.includes(e)}_showAppSupportMessage(){this._appSupportMessageElement&&(this._appSupportMessageElement.classList.remove(n.HIDDEN_CLASS),this._loadingBarElement.classList.add(n.HIDDEN_CLASS))}_showAppReferrerPopUp(){if(this._appIdReferrerElement){this._appIdReferrerElement.classList.remove(n.HIDDEN_CLASS),this._domDelegateScope.on("click",".js-close-app-referrer",()=>this._appIdReferrerElement.classList.add(n.HIDDEN_CLASS));var e=this._appIdReferrerElement.dataset.trackAppSlug;this._eventTracker.trackEvent("showDownloadQueueModule",{appSlug:e})}}_track(){this._downloadTracker.track()}_launchDownload(e){var t=e.downloadUrl;e.isExternalDownload?window.open(t,"_blank"):this._downloadIframe.src=t}_onClickButton(e,t){e.preventDefault(),e.stopPropagation();var o=this._extractDownloadData(t);this._canLaunchDownloadOnClick&&this._launchDownload(o),o.redirectUrl&&this.setWindowLocation(o.redirectUrl)}setWindowLocation(e){window.location=e}}n.STORAGE_REFERRER_PAGE_ID="referrerPageId",n.HIDDEN_CLASS="is-hidden";var i=n,l=o(16),r=o(13),d=function(e){var{appSupportMessageSelector:t,appIdReferrerSelector:o,loadingBarSelector:a,allowedReferralPageId:n}=void 0===e?{}:e;return new i({downloadTracker:Object(r.d)(),storage:Object(l.b)(),DomDelegate:s.a,eventTracker:Object(r.f)(),appSupportMessageSelector:t,appIdReferrerSelector:o,loadingBarSelector:a,allowedReferralPageId:n})}},138:function(e,t,o){"use strict";o.d(t,"a",(function(){return V})),o.d(t,"c",(function(){return X})),o.d(t,"b",(function(){return Q})),o.d(t,"d",(function(){return z}));var a=o(15),s=o.n(a),n=o(130),i=o(135),l=o(13),r=o(16),d=o(1),c=o(9),h="bottom-slide",_={overlay:".js-"+h+"-overlay",close:".js-"+h+"-close",retry:".js-"+h+"-retry"};class m{constructor(e){var{adBlockerDetector:t,adBlockPlusDetector:o,barSelector:a,buttonSelector:s,slideSelector:n,wrapperToReplaceId:i,DomDelegate:l,stateClasses:r={hidden:"is-hidden",shown:"is-shown"},trackAction:d={show:"Show",close:"Close"}}=e;this._adBlockerDetector=t,this._adBlockPlusDetector=o,this._barSelector=a,this._buttonSelector=s,this._slideSelector=n,this._wrapperToReplaceId=i,this._stateClasses=r,this._trackAction=d,this._DomDelegate=l,this._domDelegateScope=null,this._domDelegateScopeSlide=null,this._urlToDownload=null,this._isAdBlockActive=!0,this._showBar=this._showBar.bind(this),this._slideUp=this._slideUp.bind(this),this._closeModal=this._closeModal.bind(this),this._retryDownload=this._retryDownload.bind(this),this._onKeyDown=this._onKeyDown.bind(this)}start(){this._barElement=document.querySelector(this._barSelector),this._buttonElement=document.querySelector(this._buttonSelector),this._barElement&&this._buttonElement&&(this._setAdsBlockValue(),this._dataAttributes=this._barElement.dataset,this._slideElement=document.querySelector(this._slideSelector),this._slideElement&&(this._urlToDownload=this._buttonElement.href,this._buttonElement.href="#",this._addListeners()))}_setAdsBlockValue(){Promise.all([this._adBlockerDetector.detect(),this._adBlockPlusDetector.detect({force:!0,timeout:2e3})]).then(e=>{var[t,o]=e;this._isAdBlockActive=t||o,this._isAdBlockActive&&this._showBar()})}_addListeners(){this._domDelegateScopeBar||this._domDelegateScopeSlide||(this._domDelegateScopeBar=new this._DomDelegate(this._barElement),this._domDelegateScopeBar.on("click",this._buttonSelector,this._slideUp),this._domDelegateScopeSlide=new this._DomDelegate(this._slideElement),this._domDelegateScopeSlide.on("click",_.close,this._closeModal),this._domDelegateScopeSlide.on("click",_.overlay,this._closeModal),this._domDelegateScopeSlide.on("click",_.retry,this._retryDownload),document.addEventListener("keydown",this._onKeyDown))}_showBar(){this._barElement.classList.remove(this._stateClasses.hidden),this._barElement.classList.add(this._stateClasses.shown),this._hideOriginalSlotWrapper(),this._dataAttributes.uaAction=this._trackAction.show}_hideOriginalSlotWrapper(){document.getElementById(this._wrapperToReplaceId).classList.add(this._stateClasses.hidden)}_slideUp(e){e.preventDefault(),this._slideElement.classList.remove(this._stateClasses.hidden),this._slideElement.classList.add(this._stateClasses.shown),setTimeout(()=>{this._setWindowLocation()},500)}_retryDownload(e){e.preventDefault(),this._setWindowLocation()}_setWindowLocation(){window.location.href=this._urlToDownload}_onKeyDown(e){var t=void 0!==e.key&&"Escape"===e.key,o=void 0!==e.keyCode&&27===e.keyCode;(t||o)&&this._closeModal(e)}_closeModal(e){e.preventDefault(),this._slideElement.classList.add(this._stateClasses.hidden),this._slideElement.classList.remove(this._stateClasses.shown),this._dataAttributes.uaAction=this._trackAction.close,"true"!==this._dataAttributes.keepBar&&(this._barElement.classList.add(this._stateClasses.hidden),this._barElement.classList.remove(this._stateClasses.shown))}}var p=".js-mobile-modal-di",u=".js-di-recommended-app-content-install",w=".js-di-recommended-app-content-no-thanks",S=".js-di-instructions-content-continue",D="ClickProgram",g="Show",v={action:"ClickContinue",label:"step_1"},k={action:"ClickContinue",label:"step_2"},b={action:"ClickX",label:"step_1"},A={action:"ClickX",label:"step_2"},E={action:"ClickBg",label:"step_1"},L={action:"ClickBg",label:"step_2"};class R{constructor(e){var{buttonSelector:t,DomDelegate:o,eventTracker:a,modalRecommendedApp:s,modalInstructions:n,storage:i}=e;this._buttonSelector=t,this._domDelegate=o,this._eventTracker=a,this._modalRecommendedApp=s,this._modalInstructions=n,this._storage=i,this._hasBeenModalShown=!1,this._modalRecommendedElement=!1,this._modalInstructionsElement=!1,this._domDelegateDocumentScope=null,this._domDelegateScope=null,this._show=this._show.bind(this),this._launchOriginalDownload=this._launchOriginalDownload.bind(this),this._downloadRecommendApp=this._downloadRecommendApp.bind(this)}start(){this._modalRecommendedElement=this._modalRecommendedApp.getElement(),this._hasBeenModalShown=this._hasBeenDownloadIntentShown(),this._modalRecommendedElement&&!this._hasBeenModalShown&&(this._recommendedAppId=this._getRecommendedAppId(),this._modalInstructionsElement=this._modalInstructions.getElement(),this._addListeners())}_getRecommendedAppId(){var e,t=document.querySelector(p);return null==t||null===(e=t.dataset)||void 0===e?void 0:e.trackRecommendedAppId}_addListeners(){this._domDelegateDocumentScope=new this._domDelegate(document),this._domDelegateDocumentScope.on("click",this._buttonSelector,this._show),this._domDelegateRecommendedScope=new this._domDelegate(this._modalRecommendedElement),this._domDelegateRecommendedScope.on("click",u,this._downloadRecommendApp),this._domDelegateRecommendedScope.on("click",w,()=>this._launchOriginalDownload(v)),this._modalRecommendedApp.on("hide-close",()=>this._launchOriginalDownload(b)),this._modalRecommendedApp.on("hide-overlay",()=>this._launchOriginalDownload(E)),this._modalInstructionsElement&&(this._domDelegateInstructionsScope=new this._domDelegate(this._modalInstructionsElement),this._domDelegateInstructionsScope.on("click",S,()=>this._launchOriginalDownload(k)),this._modalInstructions.on("hide-close",()=>this._launchOriginalDownload(A)),this._modalInstructions.on("hide-overlay",()=>this._launchOriginalDownload(L)))}_hasBeenDownloadIntentShown(){return Boolean(this._storage.getItem(R.STORAGE_MODAL_SHOWN))}_show(e){e.preventDefault(),this._hasBeenModalShown||(this._setStorageShowModal(),this._trackShowModal(),this._modalRecommendedApp.show())}_downloadRecommendApp(e,t){e.preventDefault();var{downloadUrl:o,redirect:a}=t.dataset;!a&&o&&(this._setWindowLocation(o),this._modalInstructionsElement&&(this._modalRecommendedApp.hide(),this._modalInstructions.show())),a&&o&&(setTimeout(()=>{this._setWindowLocation(a)},500),window.open(o,"_blank")),this._trackClickRecommendedApp()}_launchOriginalDownload(e){var{action:t,label:o}=e,a=document.querySelector(this._buttonSelector),s=null==a?void 0:a.href;s&&this._setWindowLocation(s),this._trackCloseModal({action:t,label:o}),this._modalRecommendedApp.hide()}_setWindowLocation(e){window.location.href=e}_setStorageShowModal(){this._hasBeenModalShown=!0,this._storage.setItem(R.STORAGE_MODAL_SHOWN,1)}_trackClickRecommendedApp(){this._trackEvent({category:"RecommendedAppPopup",action:D,label:this._recommendedAppId})}_trackShowModal(){this._trackEvent({category:"RecommendedAppPopup",action:g,label:this._recommendedAppId})}_trackCloseModal(e){var{action:t,label:o}=e;this._trackEvent({category:"RecommendedAppPopup",action:t,label:o})}_trackEvent(e){var{category:t="",action:o="",label:a=""}=e;this._eventTracker.trackEvent("generic",{category:t,action:o,label:a})}}R.STORAGE_MODAL_SHOWN="DI_ModalShown";var O=R;function y(e){return[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length}function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e}).apply(this,arguments)}var f=".js-modal-di-recommended-app",I=".js-main-app",M=".js-modal-track-show",T=".js-modal-track-close",B="#modal-di-step-1",j="#modal-di-step-2",P="#download-arrow",W=".js-modal-window-close",N=".js-modal-window-overlay";class q{constructor(e){var{buttonSelector:t,dataLayer:o,DomDelegate:a,eventTracker:s,experiments:n,modal:i,modalSelector:l,setCookie:r,siteDomain:d,storage:c,stateClasses:h={hidden:"is-hidden",shown:"is-shown"}}=e;this.hasBeenModalShown=!1,this.stateClasses=h,this._buttonSelector=t,this._modalSelector=l,this._domDelegate=a,this._domDelegateScope=null,this._domDelegateDocumentScope=null,this._modal=i,this._eventTracker=s,this._storage=c,this._setCookie=r,this._siteDomain=d,this._hasDownloadedRecommendedApp=!1,this.closeModal=this.closeModal.bind(this),this.launchOriginalDownload=this.launchOriginalDownload.bind(this),this._showModal=this._showModal.bind(this),this._continueWithOriginalDownload=this._continueWithOriginalDownload.bind(this),this._navigateToRecommendedApp=this._navigateToRecommendedApp.bind(this),this._experiments=n||{},this._dataLayer=o||[],this._currentStep=null}start(){var e=document.querySelector(this._modalSelector);this.hasBeenModalShown=this._hasBeenDownloadIntentShown(),e&&!this.hasBeenModalShown&&(this._DomDelegateDocumentScope=new this._domDelegate(document),this._DomDelegateDocumentScope.on("click",this._buttonSelector,this._showModal),this._domDelegateScope=new this._domDelegate(e),this._domDelegateScope.on("click",f,this._navigateToRecommendedApp),this._domDelegateScope.on("click",I,this._continueWithOriginalDownload),this._domDelegateScope.on("click",W,()=>this.launchOriginalDownload({action:"ClickX"})),this._domDelegateScope.on("click",N,()=>this.launchOriginalDownload({action:"ClickBg"})))}_showModal(e){e.preventDefault(),this.hasBeenModalShown||(this._currentStep=1,this._setStorageShowModal(),this._trackShowModal(),this._modal.show())}_navigateToRecommendedApp(e,t){e.preventDefault(),this._hasDownloadedRecommendedApp=!0;var o=t.dataset;y(o)||(this._trackRecommendedApp(o),this._setCookieHasDownloadedRecommendedApp(o),this._changeToStep2(),setTimeout(()=>{this.setWindowLocation(o.downloadLaunchUrl)},300))}_continueWithOriginalDownload(e,t){e.preventDefault(),this._trackMainApp(t),this.launchOriginalDownload({})}launchOriginalDownload(e){var{action:t}=e;t&&this.closeModal({action:t});var o=document.querySelector(this._buttonSelector),a=null==o?void 0:o.href;a&&this.setWindowLocation(a)}closeModal(e){var{action:t}=e;this._trackCloseModal({action:t}),this._modal.hide()}_changeToStep2(){var e=document.querySelector(B),t=document.querySelector(j),o=document.querySelector(P);t&&(e.classList.add(this.stateClasses.hidden),e.classList.remove(this.stateClasses.shown),t.classList.add(this.stateClasses.shown),t.classList.remove(this.stateClasses.hidden)),o&&(o.classList.add(this.stateClasses.shown),o.classList.remove(this.stateClasses.hidden)),this._currentStep=2}_trackShowModal(){var e=document.querySelector(M),t=null==e?void 0:e.dataset;y(t)||this._trackEvent(t)}_trackCloseModal(e){var{action:t}=e,o=document.querySelector(T),a=null==o?void 0:o.dataset;if(!y(a)&&(this._trackEvent(C({},a,{action:t,label:"step_"+this._currentStep})),!this._hasDownloadedRecommendedApp)){var s,n=null===(s=a.label)||void 0===s?void 0:s.toLowerCase();this._trackFacebookEvent({action:"Skip",appName:n})}}_trackRecommendedApp(e){var t,o=null===(t=e.label)||void 0===t?void 0:t.toLowerCase();this._trackEvent(e),this._trackFacebookEvent({action:"Take",appName:o}),this._trackThirdParty()}_trackThirdParty(){var e=document.getElementById("third-party-track-ga"),t=document.getElementById("third-party-track-fb");if(e){var o=e.dataset.gaId;function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config",o)}if(t){var s=t.dataset.fbId;fbq("init",s),fbq("track","PageView")}}_trackMainApp(e){var t=e.dataset;if(!y(t)&&(this._trackEvent(t),!this._hasDownloadedRecommendedApp)){var o,a=null===(o=t.campaignId)||void 0===o?void 0:o.toLowerCase();this._trackFacebookEvent({action:"Skip",appName:a})}}_trackFacebookEvent(e){var{action:t="",appName:o=""}=e;this._eventTracker.trackEvent("fbRecommendedOffer",{action:t,appName:o})}_trackEvent(e){var{category:t="",action:o="",label:a=""}=e;this._eventTracker.trackEvent("generic",{category:t,action:o,label:a})}_hasBeenDownloadIntentShown(){return Boolean(this._storage.getItem(q.STORAGE_MODAL_SHOWN))}setWindowLocation(e){window.location.href=e}_setStorageShowModal(){this._storage.setItem(q.STORAGE_MODAL_SHOWN,!0),this.hasBeenModalShown=!0;var e=document.querySelector(f),t=null==e?void 0:e.dataset,o=null==t?void 0:t.campaignId;o&&(this._dataLayer.push({diCampaign:o}),this._storage.setItem(q.STORAGE_LAST_CAMPAIGN_SHOWN,o))}_setCookieHasDownloadedRecommendedApp(e){var{storeDiDownloaded:t,label:o=""}=e;if("true"===t&&""!==o){var a=q.COOKIE_RECOMMENDED_APP_TEMPLATE.replace("{appName}",o);this._setCookie(a,1,30,this._siteDomain)}}}q.COOKIE_RECOMMENDED_APP_TEMPLATE="DI_HasDownloaded{appName}",q.STORAGE_MODAL_SHOWN="DI_ModalShown",q.STORAGE_LAST_CAMPAIGN_SHOWN="CPI_LastCampaignShown";var x=q,H=".js-modal-di-external .js-modal-window-container",G="#step-wait",U="#download-arrow";var F=class extends x{constructor(e){var{buttonSelector:t,buttonSelectorLaunchDownload:o,dataLayer:a,DomDelegate:s,eventTracker:n,experiments:i,modal:l,modalSelector:r,setCookie:d,siteDomain:c,storage:h,stateClasses:_={hidden:"is-hidden",shown:"is-shown"}}=e;super({buttonSelector:t,dataLayer:a,DomDelegate:s,eventTracker:n,experiments:i,modal:l,modalSelector:r,setCookie:d,siteDomain:c,stateClasses:_,storage:h}),this._buttonSelectorLaunchDownload=o,this.launchOriginalDownload=this.launchOriginalExternalDownload.bind(this)}start(){(super.start(),this.hasBeenModalShown)||document.querySelectorAll(this._buttonSelector).forEach(e=>{e.classList.remove(this._buttonSelectorLaunchDownload.slice(1))})}launchOriginalExternalDownload(e){var t,{action:o}=e;this._changeToStepWait();var a=null===(t=document.querySelector(this._buttonSelector).dataset)||void 0===t?void 0:t.download,{downloadUrl:s,redirectUrl:n}=a&&JSON.parse(a);setTimeout(()=>{o&&super.closeModal({action:o}),window.open(s,"_blank"),n&&super.setWindowLocation(n)},3e3)}_changeToStepWait(){var e=document.querySelector(H),t=document.querySelector(G);e.classList.add(this.stateClasses.hidden),e.classList.remove(this.stateClasses.shown),t.classList.remove(this.stateClasses.hidden),t.classList.add(this.stateClasses.shown);var o=document.querySelector(U);o&&(o.classList.add(this.stateClasses.hidden),o.classList.remove(this.stateClasses.shown))}},{siteDomain:K,experiments:J}=d.b,V=()=>new m({adBlockerDetector:Object(c.b)(),adBlockPlusDetector:Object(c.a)(),barSelector:".js-header-bar",buttonSelector:".js-header-bar__cta",slideSelector:".js-bottom-slide",wrapperToReplaceId:"top-notification-bar-wrapper",DomDelegate:s.a}),X=()=>{var e=new n.a({modalSelector:".js-modal-di",closeSelector:null,overlaySelector:null});return new x({buttonSelector:".js-trigger-modal-di",dataLayer:window.dataLayer,DomDelegate:s.a,eventTracker:Object(l.f)(),experiments:J,modal:e,modalSelector:".js-modal-di",setCookie:i.a,siteDomain:K,storage:Object(r.b)({expires:3600})})},Q=()=>{var e=new n.a({modalSelector:".js-modal-di-external",closeSelector:null,overlaySelector:null});return new F({buttonSelector:".js-trigger-modal-di-external",buttonSelectorLaunchDownload:".js-launch-download",dataLayer:window.dataLayer,DomDelegate:s.a,eventTracker:Object(l.f)(),experiments:J,modal:e,modalSelector:".js-modal-di-external",setCookie:i.a,siteDomain:K,storage:Object(r.b)({expires:3600})})},z=()=>{var e=new n.a({modalSelector:".js-modal-di-recommended-app"}),t=new n.a({modalSelector:".js-modal-di-instructions"});return new O({buttonSelector:".js-trigger-mobile-modal-di",DomDelegate:s.a,eventTracker:Object(l.f)(),modalRecommendedApp:e,modalInstructions:t,storage:Object(r.b)({expires:3600})})}}}]);